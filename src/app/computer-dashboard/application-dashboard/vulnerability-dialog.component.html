<mat-dialog-content class="dialog-scroll">
  <!-- Sticky Header + Buttons -->
  <div class="severity-header">
    <div class="d-flex justify-content-between align-items-center px-1 pt-1">
      <h2 class="m-0">
        Vulnerabilities for
        <span class="vuln-software">"{{ data.softwareName }}"</span>
      </h2>
      <!-- <button mat-button mat-dialog-close>Close</button> -->
       <p>jjjjjjjjjjj</p>
    </div>

    <div class="severity-buttons">
      <button mat-raised-button class="severity-btn critical" (click)="filterVulnerabilities('Critical')">
        Critical: {{ data.severityCounts.critical }}
      </button>
      <button mat-raised-button class="severity-btn high" (click)="filterVulnerabilities('High')">
        High: {{ data.severityCounts.high }}
      </button>
      <button mat-raised-button class="severity-btn medium" (click)="filterVulnerabilities('Medium')">
        Medium: {{ data.severityCounts.medium }}
      </button>
      <button mat-raised-button class="severity-btn low" (click)="filterVulnerabilities('Low')">
        Low: {{ data.severityCounts.low }}
      </button>
      <button mat-raised-button class="severity-btn all" (click)="filterVulnerabilities(null)">
        All
      </button>
    </div>
  </div>

  <!-- Vulnerabilities Table -->
  <ng-container *ngIf="filteredVulnerabilities.length; else noVulnerabilities">
    <table mat-table [dataSource]="filteredVulnerabilities" class="comp-table">
      <ng-container matColumnDef="cveId">
        <th mat-header-cell *matHeaderCellDef>CVE ID</th>
        <td mat-cell *matCellDef="let vuln">{{ vuln.cveId }}</td>
      </ng-container>

      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let vuln">{{ vuln.description }}</td>
      </ng-container>

      <ng-container matColumnDef="severity">
        <th class="text-center" mat-header-cell *matHeaderCellDef>Severity</th>
        <td class="text-center" mat-cell *matCellDef="let vuln">
          <span [ngClass]="{
            'severity-critical': vuln.severity.toLowerCase() === 'critical',
            'severity-high': vuln.severity.toLowerCase() === 'high',
            'severity-medium': vuln.severity.toLowerCase() === 'medium',
            'severity-low': vuln.severity.toLowerCase() === 'low'
          }">{{ vuln.severity }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="cvssScore">
        <th class="text-center" mat-header-cell *matHeaderCellDef>CVSS Score</th>
        <td class="text-center" mat-cell *matCellDef="let vuln">{{ vuln.cvssScore }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="vulnDisplayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: vulnDisplayedColumns;"></tr>
    </table>
  </ng-container>

  <ng-template #noVulnerabilities>
    <p>No vulnerabilities found</p>
  </ng-template>
</mat-dialog-content>

<mat-dialog-actions class = "justify-content-end">
  <button  mat-button mat-dialog-close>Close</button>
</mat-dialog-actions>